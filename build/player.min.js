function play(a){console.log('"'+$(a).find(".title").text()+'"',"clicked. :)"),$(a).hasClass("playing")?$(a).hasClass("paused")?($(a).removeClass("paused"),$("#player").get(0).play()):($(a).addClass("paused"),$("#player").get(0).pause()):(console.log("Play"),clearStatus(currentSongEl),currentSongEl=a,songUrl=$(a).attr("data-src"),$(a).addClass("playing"),$("#player").attr("src",songUrl).get(0).play())}function next(){clearStatus(currentSongEl),play($(currentSongEl).next()),$(currentSongEl).find(".playbar").css("width",playedPercent+"%")}function clearStatus(a){null!==a&&(console.log('"'+$(a).find(".title").text()+'"',"finished. D:"),$(a).removeClass("playing").removeClass("paused").find(".playbar").css("width","0"))}var currentSongEl,songUrl,playedPercent,currentSong,originalTitle;$(function(){console.log("Loading elements."),$("body").append('<audio id="player"></audio>'),$(".playlist li").append('<span class="playbar"></span>').append('<span class="status"></span>'),originalTitle=$("title").text(),$(".playlist li").click(function(){play(this)}),$("#player").bind("timeupdate",function(){playedPercent=$(this).get(0).currentTime/$(this).get(0).duration*100,$(currentSongEl).find(".playbar").css("width",playedPercent+"%")}),$("#player").bind("error",function(){$(currentSongEl).addClass("error"),next()}),$("#player").bind("ended",function(){next()})});